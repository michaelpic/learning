#include <stdio.h>
#include <stdlib.h>

#define MAX_STACK 1000

typedef struct {
  char array[MAX_STACK];
  int indice;         //indice di inserimento
} Stack;

void push(Stack pila, char a)
{
  if(pila.indice == MAX_STACK)
  {
      printf("Stack Overflow");
  }
  else
  {
    pila.array[pila.indice] = a;
  }
}

int pop(Stack pila)
{
  if(pila.indice == 0)
  {
    printf("L'espressione chiude una parentesi senza prima aprirla, espressione errata\n");
    return 1;
  }
  else
  {
    return 0;
  }
}
void controllo(char frase[],int max,Stack controllore)
{
    int i,error=0;
    controllore.indice = 0;
    for(i=0;i<max;i++)
    {
        if(frase[i]=='(')
        {
            push(controllore,'(');
            controllore.indice++;
        }
        else if(frase[i]== ')')
        {
            error = pop(controllore);
            if(error == 0)
                controllore.indice--;
        }
        if(error == 1)
            break;
    }
    controllore.indice--;
    if(controllore.indice==0)
        printf("Espressione corretta");
    else if(controllore.indice != 0 && error == 0
            )
        printf("Sono rimaste parentesi aperte, espressione errata");
}
int main()
{
    int max=100;
    Stack controllore;
    char frase[max];
    printf("Inserisci la frase\n");
    scanf("%s",frase);
    controllo(frase,max,controllore);

    return 0;
}
